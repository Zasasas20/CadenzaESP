<!DOCTYPE html>
<html>
<style>

html, body{
    margin: 0;
    height: 100%;
}

body{
    display: flex;
    justify-content: center;
    align-items: center;

}

#Info{
    display: flex;
    align-items:end;
    gap: 20px;
}

#Elements{
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 20px;
}


</style>
<head>
    <title>Cadenza</title>
</head>
<body>
    <div id = 'Elements'>
        <div id = 'Menu'>
            <label for='Radio-Channel'>Choose a radio category:</label> 
                <select name='Channels' id='Channels'>
                    <option value='https://strm112.1.fm/bossanova_mobile_mp3?aw_0_req.gdpr=true'>Bossa Nova</option> 
                    <option value='http://stream.antennethueringen.de/live/aac-64/stream.antennethueringen.de/'>Hip Hop</option> 
                    <option value='http://curiosity.shoutca.st:6035/;'>Arabic</option> 
                    <option value='Custom'>Custom</option> 
                </select>
        </div>
        <div id = 'Info'>
            <div class = 'textBox' id='Box' hidden>
                <p>Radio Channel URL: </p>
                <input type='text' id = 'Music'>
            </div>
            <div class = 'Button'>
                <button id='Change'>Change Channel</button> 
            </div>
        </div>
        <div class = 'Button'>
            <button id='Reset'>Reset Settings</button> 
        </div>
    </div>
</body>
<script>
    var Socket;
    document.getElementById('Reset').addEventListener('click', reset);
    document.getElementById('Change').addEventListener('click', change);
    document.getElementById('Channels').addEventListener('change', category);

    function init(){
        Socket = new WebSocket('ws://' + window.location.hostname + ':81/');
        Socket.onmessage = function(event) {};
    }

    function reset(){
        var data = {
            Command: 'Reset'
        };
        Socket.send(JSON.stringify(data));
    }

    function change(){
        var data = {
            Command: 'Change'
        };
        if (document.getElementById('Channels').value === 'Custom'){
            data.Link = document.getElementById('Music').value;
        }
        else{
            data.Link = document.getElementById('Channels').value;
        }
        Socket.send(JSON.stringify(data));
        console.log(data);
    }

    function category(){
        let choice = document.getElementById('Channels').value;
        if (choice === 'Custom'){
            document.getElementById('Box').hidden = false;
        }
        else{
            document.getElementById('Box').hidden = true;
        }
    }

    window.onload = function(event){
        init();
        console.log('Website Loads');
    }

</script>
</html>